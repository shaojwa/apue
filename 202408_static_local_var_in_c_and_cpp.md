in c, static variable in function is not thread-safe. 
